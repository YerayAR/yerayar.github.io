/* ====================================================================
   Portfolio UI Refresh (Visual-only)
   - No content changes
   - No build tools / frameworks
   - Keeps anchors/ids and existing HTML structure
   ==================================================================== */

/* ------------------------------
   1) Design tokens
   ------------------------------ */
:root {
  /* Layout */
  --container: 1160px;
  --gutter: 20px;
  --header-h: 72px;

  /* Spacing scale (4px baseline) */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-7: 32px;
  --space-8: 40px;
  --space-9: 56px;
  --space-10: 72px;

  /* Radius */
  --radius-sm: 10px;
  --radius-md: 14px;
  --radius-lg: 18px;
  --radius-xl: 24px;
  --radius-pill: 999px;

  /* Typography */
  --font-sans: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --font-display: "Inter", ui-sans-serif, system-ui;

  /* Type scale */
  --fs-body: 16px;
  --fs-sm: 14px;
  --fs-xs: 12px;

  --fs-h1: clamp(2.1rem, 4.2vw, 3.1rem);
  --fs-h2: clamp(1.55rem, 2.4vw, 2.05rem);
  --fs-h3: 1.15rem;
  --fs-h4: 1.02rem;

  --lh-body: 1.65;
  --lh-tight: 1.2;

  --tracking-tight: -0.02em;
  --tracking-wide: 0.02em;

  /* Motion */
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
  --t-fast: 150ms;
  --t-med: 220ms;

  /* Elevation */
  --shadow-sm: 0 1px 2px rgba(15, 23, 42, 0.06), 0 6px 18px rgba(15, 23, 42, 0.06);
  --shadow-md: 0 10px 25px rgba(15, 23, 42, 0.10);
  --shadow-lg: 0 22px 50px rgba(15, 23, 42, 0.16);

  /* Z-index */
  --z-bg: 0;
  --z-content: 10;
  --z-header: 1000;
  --z-overlay: 1200;

  /* Theme (light as base) */
  color-scheme: light;

  --bg: #f6f7fb;
  --bg-elev: #ffffff;
  --surface: #ffffff;
  --surface-solid: #ffffff;
  --surface-2: #f3f6fb;

  --text: #0f172a;
  --text-muted: rgba(15, 23, 42, 0.70);
  --text-faint: rgba(15, 23, 42, 0.52);

  --border: rgba(15, 23, 42, 0.10);
  --border-strong: rgba(15, 23, 42, 0.18);

  --primary: #0891b2; /* cyan-700-ish */
  --accent: #7c3aed;  /* violet */

  --gradient-accent: linear-gradient(135deg, rgba(8, 145, 178, 1), rgba(124, 58, 237, 1));
  --ring: 0 0 0 3px rgba(8, 145, 178, 0.20);

  /* Aliases (compatibilidad con animaciones antiguas copiadas/pegadas) */
  --accent-color: var(--primary);
  --accent-secondary: var(--accent);

  /* Navbar */
  --nav-bg: rgba(255, 255, 255, 0.96);
  --nav-border: rgba(15, 23, 42, 0.12);

  /* Hero overlay */
  --hero-scrim: linear-gradient(
    180deg,
    rgba(15, 23, 42, 0.55) 0%,
    rgba(15, 23, 42, 0.42) 35%,
    rgba(15, 23, 42, 0.65) 100%
  );
}

:root[data-theme="dark"] {
  color-scheme: dark;

  --bg: #070a12;
  --bg-elev: #0b1220;
  --surface: #0b1220;
  --surface-solid: #0b1220;
  --surface-2: #0f1a2b;

  /* Dark: un poco más “premium” (más separación y profundidad) */
  --shadow-sm: 0 2px 10px rgba(0, 0, 0, 0.35);
  --shadow-md: 0 16px 40px rgba(0, 0, 0, 0.45);
  --shadow-lg: 0 28px 70px rgba(0, 0, 0, 0.55);

  --text: rgba(248, 250, 252, 0.95);
  --text-muted: rgba(248, 250, 252, 0.72);
  --text-faint: rgba(248, 250, 252, 0.55);

  --border: rgba(148, 163, 184, 0.16);
  --border-strong: rgba(148, 163, 184, 0.24);

  --primary: #22d3ee; /* cyan-400 */
  --accent: #a78bfa;  /* violet-300 */

  --gradient-accent: linear-gradient(135deg, rgba(34, 211, 238, 1), rgba(167, 139, 250, 1));
  --ring: 0 0 0 3px rgba(34, 211, 238, 0.22);

  --nav-bg: #0b1220;
  --nav-border: rgba(148, 163, 184, 0.18);

  --hero-scrim: linear-gradient(
    180deg,
    rgba(2, 6, 23, 0.55) 0%,
    rgba(2, 6, 23, 0.35) 35%,
    rgba(2, 6, 23, 0.70) 100%
  );
}

/* Auto theme: CSS-driven via prefers-color-scheme */
:root[data-theme="auto"] {
  color-scheme: light;
}
@media (prefers-color-scheme: dark) {
  :root[data-theme="auto"] {
    color-scheme: dark;

    --bg: #070a12;
    --bg-elev: #0b1220;
    --surface: #0b1220;
    --surface-solid: #0b1220;
    --surface-2: #0f1a2b;

    --text: rgba(248, 250, 252, 0.95);
    --text-muted: rgba(248, 250, 252, 0.72);
    --text-faint: rgba(248, 250, 252, 0.55);

    --border: rgba(148, 163, 184, 0.16);
    --border-strong: rgba(148, 163, 184, 0.24);

    --primary: #22d3ee;
    --accent: #a78bfa;

    --gradient-accent: linear-gradient(135deg, rgba(34, 211, 238, 1), rgba(167, 139, 250, 1));
    --ring: 0 0 0 3px rgba(34, 211, 238, 0.22);

    --nav-bg: #0b1220;
    --nav-border: rgba(148, 163, 184, 0.18);

    --hero-scrim: linear-gradient(
      180deg,
      rgba(2, 6, 23, 0.55) 0%,
      rgba(2, 6, 23, 0.35) 35%,
      rgba(2, 6, 23, 0.70) 100%
    );
  }
}

/* ------------------------------
   2) Base
   ------------------------------ */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  font-family: var(--font-sans);
  font-size: var(--fs-body);
  line-height: var(--lh-body);
  color: var(--text);
  overflow-x: hidden;

  /* Fondo suave (sin “spotlight” agresivo) */
  background:
    radial-gradient(900px 520px at 18% -12%, rgba(8, 145, 178, 0.10), transparent 62%),
    radial-gradient(820px 520px at 85% -8%, rgba(124, 58, 237, 0.08), transparent 60%),
    radial-gradient(820px 520px at 50% 112%, rgba(8, 145, 178, 0.06), transparent 62%),
    var(--bg);
}

/* Dark mode: más contraste y “depth” sin neón ni spotlight */
:root[data-theme="dark"] body,
@media (prefers-color-scheme: dark) {
  :root[data-theme="auto"] body {
    background:
      radial-gradient(1000px 560px at 15% -10%, rgba(34, 211, 238, 0.14), transparent 62%),
      radial-gradient(900px 560px at 85% -6%, rgba(167, 139, 250, 0.12), transparent 60%),
      radial-gradient(900px 560px at 50% 112%, rgba(34, 211, 238, 0.08), transparent 62%),
      var(--bg);
  }
}

img,
video,
canvas {
  display: block;
  max-width: 100%;
}

a {
  color: var(--primary);
  text-decoration: none;
  text-underline-offset: 3px;
}

a:hover {
  text-decoration: underline;
}

:focus-visible {
  outline: none;
  box-shadow: var(--ring);
  border-radius: 8px;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Utility: prevent background scroll when mobile menu open */
body.nav-open {
  overflow: hidden;
}

/* ------------------------------
   3) Decorative background (Matrix)
   ------------------------------ */
.matrix-rain {
  position: fixed;
  top: 0;
  height: 100%;
  width: max(80px, calc((100vw - var(--container)) / 2));
  pointer-events: none;
  z-index: var(--z-bg);
  overflow: hidden;
  opacity: 0.14;
  filter: blur(0.2px);
}

.matrix-rain.left { left: 0; }
.matrix-rain.right { right: 0; }

.matrix-rain canvas {
  width: 100%;
  height: 100%;
}

/* Keep matrix on large screens only, and make it subtle */
@media (max-width: 900px) {
  .matrix-rain { display: none; }
}

/* ------------------------------
   4) Header / Navbar
   ------------------------------ */
header {
  position: sticky;
  top: 0;
  z-index: var(--z-header);
}

/* "Sitio en desarrollo" -> Beta badge (visual-only, keeps text) */
.dev-banner {
  position: absolute;
  top: 10px;
  right: 14px;
  z-index: calc(var(--z-header) + 2);

  padding: 6px 10px;
  border-radius: var(--radius-pill);
  font-size: var(--fs-xs);
  letter-spacing: var(--tracking-wide);
  font-weight: 800;

  color: var(--text);
  background: var(--bg-elev);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
}

:root[data-theme="dark"] .dev-banner,
@media (prefers-color-scheme: dark) {
  :root[data-theme="auto"] .dev-banner {
    background: rgba(2, 6, 23, 0.55);
    border-color: var(--nav-border);
  }
}

.top-navbar {
  position: relative;
  height: var(--header-h);
  display: flex;
  align-items: center;

  background: var(--nav-bg);
  border-bottom: 1px solid var(--nav-border);
}

.nav-container {
  width: min(100%, var(--container));
  margin: 0 auto;
  padding: 0 var(--gutter);

  display: flex;
  align-items: center;
  gap: var(--space-4);
}

.nav-logo {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  min-width: 160px;
}

.logo-img {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  background: var(--surface-solid);
}

.logo-text {
  font-family: var(--font-display);
  font-weight: 800;
  letter-spacing: var(--tracking-tight);
  color: var(--text);
}

/* Segmented control language switch */
.lang-toggle {
  margin-left: auto;
  display: inline-flex;
  padding: 3px;
  gap: 2px;
  border-radius: var(--radius-pill);
  border: 1px solid var(--border);
  background: var(--surface-2);
}

.lang-btn {
  width: 42px;
  height: 36px;
  border: 0;
  border-radius: var(--radius-pill);
  background: transparent;
  color: var(--text-muted);
  font-weight: 700;
  letter-spacing: var(--tracking-wide);
  cursor: pointer;
  transition: background var(--t-med) var(--ease-out), color var(--t-med) var(--ease-out), transform var(--t-med) var(--ease-out);
}

.lang-btn:hover {
  color: var(--text);
}

.lang-btn.active {
  background: var(--surface-solid);
  color: var(--text);
  box-shadow: var(--shadow-sm);
}

/* Theme toggle */
.theme-toggle {
  width: 42px;
  height: 36px;
  border-radius: var(--radius-pill);
  border: 1px solid var(--border);
  background: var(--surface-2);
  color: var(--text);
  cursor: pointer;

  display: grid;
  place-items: center;
  transition: transform var(--t-med) var(--ease-out), box-shadow var(--t-med) var(--ease-out), background var(--t-med) var(--ease-out);
}

.theme-toggle:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.theme-icon {
  font-size: 16px;
  line-height: 1;
}

.nav-menu {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  align-items: center;
  gap: 4px;
}

.nav-link {
  display: inline-flex;
  align-items: center;
  justify-content: center;

  height: 36px;
  padding: 0 12px;
  border-radius: 10px;

  color: var(--text-muted);
  font-size: 0.95rem;
  white-space: nowrap;

  transition: background var(--t-med) var(--ease-out), color var(--t-med) var(--ease-out), transform var(--t-med) var(--ease-out);
}

.nav-link:hover {
  text-decoration: none;
  color: var(--text);
  background: rgba(8, 145, 178, 0.10);
}

/* Hamburger (already in HTML) */
.hamburger {
  display: none;
  margin-left: 6px;

  width: 42px;
  height: 36px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--surface-2);

  cursor: pointer;
  align-items: center;
  justify-content: center;
  gap: 4px;
  flex-direction: column;
}

.hamburger .bar {
  width: 18px;
  height: 2px;
  background: var(--text);
  border-radius: 999px;
  opacity: 0.9;
  transition: transform var(--t-med) var(--ease-out), opacity var(--t-med) var(--ease-out);
}

.hamburger.active .bar:nth-child(1) { transform: translateY(6px) rotate(45deg); }
.hamburger.active .bar:nth-child(2) { opacity: 0; }
.hamburger.active .bar:nth-child(3) { transform: translateY(-6px) rotate(-45deg); }

/* Mobile nav */
@media (max-width: 920px) {
  .nav-container {
    gap: var(--space-3);
  }

  .nav-menu {
    position: absolute;
    left: 0;
    right: 0;
    top: var(--header-h);

    display: none;
    flex-direction: column;
    align-items: stretch;
    gap: 0;

    padding: 10px;
    background: var(--nav-bg);
    border-bottom: 1px solid var(--nav-border);
  }

  .nav-menu.active {
    display: flex;
  }

  .nav-item {
    border-top: 1px solid var(--nav-border);
  }

  .nav-link {
    width: 100%;
    justify-content: flex-start;
    height: 44px;
    padding: 0 12px;
  }

  .hamburger {
    display: inline-flex;
  }
}

/* ------------------------------
   5) Layout & sections
   ------------------------------ */

/* anchor offset for sticky header */
section[id] {
  scroll-margin-top: calc(var(--header-h) + var(--space-6));
}

.intro-about-layout {
  width: min(100%, var(--container));
  margin: var(--space-8) auto;
  padding: 0 var(--gutter);

  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-8);
}

@media (min-width: 992px) {
  .intro-about-layout {
    grid-template-columns: 1fr 1.35fr;
    align-items: stretch;
  }
}

.content-section {
  width: min(100%, var(--container));
  margin: var(--space-9) auto;
  padding: 0 var(--gutter);
}

/* Avoid extra margins inside the intro+about wrapper */
.intro-about-layout > .content-section {
  margin: 0;
}

.section-content {
  position: relative;
  z-index: var(--z-content);

  /* Sección más “premium” (sin transparencias tipo cristal) */
  background: linear-gradient(180deg, var(--surface) 0%, var(--surface-2) 100%);
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);

  padding: clamp(18px, 2.4vw, 28px);
}

/* Headings */
h2 {
  margin: 0 0 var(--space-4);
  font-family: var(--font-display);
  font-size: var(--fs-h2);
  line-height: var(--lh-tight);
  letter-spacing: var(--tracking-tight);
}

/* Headings en dark: un toque premium (gradiente sutil, no glow) */
:root[data-theme="dark"] h2,
@media (prefers-color-scheme: dark) {
  :root[data-theme="auto"] h2 {
    background: var(--gradient-accent);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }
}

h3 {
  margin: 0 0 var(--space-2);
  font-family: var(--font-display);
  font-size: var(--fs-h3);
  line-height: var(--lh-tight);
  letter-spacing: var(--tracking-tight);
}

h4 {
  margin: 0 0 var(--space-2);
  font-family: var(--font-display);
  font-size: var(--fs-h4);
  line-height: var(--lh-tight);
}

p {
  margin: 0 0 var(--space-4);
  color: var(--text-muted);
  font-weight: 450;
}

.section-content p:last-child {
  margin-bottom: 0;
}

/* Card primitives (re-used) */
.project,
.experience-item,
.service-item,
.repo-item,
.cv-card,
.stat-card {
  background: var(--surface-2);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 16px;
  box-shadow: var(--shadow-sm);
  transition: transform var(--t-med) var(--ease-out), box-shadow var(--t-med) var(--ease-out), border-color var(--t-med) var(--ease-out);
}

.project:hover,
.experience-item:hover,
.service-item:hover,
.repo-item:hover,
.cv-card:hover,
.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  border-color: var(--border-strong);
}

.project a,
.repo-item a {
  color: var(--primary);
  text-decoration: none;
}

.project a:hover,
.repo-item a:hover {
  text-decoration: underline;
}

/* ------------------------------
   6) Hero (intro) + video overlay
   ------------------------------ */

#intro {
  position: relative;
  overflow: hidden;

  border-radius: var(--radius-xl);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-lg);

  min-height: clamp(520px, 72vh, 760px);
}

#background-video {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
  transform: scale(1.04);
  filter: saturate(1.05) contrast(1.1) brightness(0.55);
}

#three-canvas {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  opacity: 0.22;
}

#intro::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 2;
  background: var(--hero-scrim);
}

.intro-content {
  position: relative;
  z-index: 3;
  height: 100%;

  display: grid;
  place-items: center;
  padding: var(--space-8) var(--space-5);
}

.intro-layout {
  width: min(540px, 100%);
  display: grid;
  justify-items: center;
  gap: var(--space-4);
  text-align: center;
}

/* Subtle entrance animation */
@media (prefers-reduced-motion: no-preference) {
  .intro-layout {
    animation: fadeUp 600ms var(--ease-out) both;
  }
  .content-section .section-content {
    animation: fadeUp 500ms var(--ease-out) both;
  }
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.intro-name {
  margin: 0;
  font-family: var(--font-display);
  font-weight: 800;
  letter-spacing: var(--tracking-tight);
  font-size: var(--fs-h1);
  line-height: 1.05;
  color: rgba(255, 255, 255, 0.96);
  text-shadow: 0 14px 40px rgba(0, 0, 0, 0.35);
}

.intro-description {
  margin: 0;
  max-width: 48ch;
  color: rgba(255, 255, 255, 0.82);
  font-size: 1.05rem;
}

/* Avatar + atom effect (more premium, less neon) */
.atom {
  width: clamp(190px, 24vw, 260px);
  height: clamp(190px, 24vw, 260px);
  border-radius: 50%;
  position: relative;
  display: grid;
  place-items: center;
}

.atom::before,
.atom::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.38);
  filter: drop-shadow(0 16px 28px rgba(0, 0, 0, 0.25));
  opacity: 0.7;
}

@media (prefers-reduced-motion: no-preference) {
  .atom::before { animation: orbit 6s linear infinite; }
  .atom::after  { animation: orbit 8s linear infinite reverse; transform: rotate(32deg); }
}

@keyframes orbit {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

.profile-photo {
  width: 180px;
  height: 180px;
  border-radius: 50%;
  object-fit: cover;
  border: 1px solid rgba(255, 255, 255, 0.35);
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.45);
}

@media (max-width: 768px) {
  #intro { min-height: 520px; }
  .profile-photo { width: 150px; height: 150px; }
}

/* ------------------------------
   7) Technologies (chips)
   ------------------------------ */
.tech-list {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  margin-top: var(--space-4);
}

.tech-item {
  display: inline-flex;
  align-items: center;
  gap: 8px;

  padding: 10px 12px;
  border-radius: var(--radius-pill);
  border: 1px solid var(--border);
  background: var(--surface-2);

  font-size: var(--fs-sm);
  color: var(--text);

  transition: transform var(--t-med) var(--ease-out), border-color var(--t-med) var(--ease-out), background var(--t-med) var(--ease-out);
}

.tech-item:hover {
  transform: translateY(-1px);
  border-color: var(--border-strong);
}

/* ------------------------------
   8) Services / Projects / Stats grids
   ------------------------------ */

/* Services: turn the existing flat list into a responsive grid (no HTML changes) */
#services .section-content {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-4);
}

#services .section-content > h2 {
  grid-column: 1 / -1;
}

@media (min-width: 720px) {
  #services .section-content {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* Projects: keep flow, but improve spacing */
#projects .project,
#projects .academic-projects,
#projects #repo-list {
  margin-top: var(--space-4);
}

/* Stats */
.stats-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-4);
  margin-top: var(--space-4);
}

@media (min-width: 640px) {
  .stats-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

.stat-number {
  display: block;
  font-family: var(--font-display);
  font-weight: 800;
  font-size: 2rem;
  letter-spacing: var(--tracking-tight);
  font-variant-numeric: tabular-nums;
  background: var(--gradient-accent);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  margin-bottom: 6px;
}

@media (prefers-reduced-motion: no-preference) {
  #stats .stat-card.is-revealed .stat-number {
    animation: stat-pop 520ms var(--ease-out) both;
  }

  #stats .stat-card.is-revealed p {
    animation: stat-fade 520ms var(--ease-out) both;
    animation-delay: 90ms;
  }

  @keyframes stat-pop {
    from { opacity: 0; transform: translateY(6px) scale(0.985); filter: blur(2px); }
    to { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
  }

  @keyframes stat-fade {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
  }
}

/* Python visualization */
.viz-layout {
  display: grid;
  gap: var(--space-5);
  align-items: center;
}

.viz-toggle-header {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
}

.viz-collapsible {
  display: none;
  margin-top: var(--space-4);
}

.viz-collapsible.is-open {
  display: block;
}

.viz-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: var(--space-2) 0 var(--space-3);
}

.viz-search {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px;
  margin-bottom: var(--space-3);
}

.viz-label {
  font-weight: 600;
  color: var(--text);
}

.viz-input {
  width: 90px;
  padding: 8px 10px;
  border-radius: var(--radius-pill);
  border: 1px solid var(--border);
  background: var(--surface-2);
  color: var(--text);
  font-weight: 600;
  text-align: center;
}

.viz-run {
  border: 1px solid var(--border);
  background: var(--primary);
  color: #0b0f14;
  padding: 8px 14px;
  border-radius: var(--radius-pill);
  font-weight: 700;
  font-size: var(--fs-sm);
  cursor: pointer;
  transition: transform var(--t-fast) var(--ease-out), box-shadow var(--t-fast) var(--ease-out);
}

.viz-run:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.viz-btn {
  --viz-btn-color: var(--primary);
  border: 1px solid var(--border);
  background: var(--surface-2);
  color: var(--text);
  padding: 8px 14px;
  border-radius: var(--radius-pill);
  font-weight: 600;
  font-size: var(--fs-sm);
  cursor: pointer;
  transition: transform var(--t-fast) var(--ease-out), border-color var(--t-fast) var(--ease-out), box-shadow var(--t-fast) var(--ease-out);
}

.viz-btn:hover {
  transform: translateY(-1px);
  border-color: var(--border-strong);
  box-shadow: var(--shadow-sm);
}

.viz-btn.active {
  background: var(--viz-btn-color);
  color: #0b0f14;
  border-color: transparent;
}

.viz-text p {
  margin-bottom: var(--space-3);
}

.viz-note {
  font-size: var(--fs-sm);
  color: var(--text-muted);
}

.viz-figure {
  margin: 0;
  border-radius: var(--radius-lg);
  overflow: hidden;
  border: 1px solid var(--border);
  background: var(--surface-2);
  box-shadow: var(--shadow-sm);
}

.viz-figure canvas {
  width: 100%;
  height: clamp(260px, 40vw, 420px);
  display: block;
  background: #f8fafc;
}

.viz-caption {
  padding: 10px 14px 14px;
  font-size: var(--fs-sm);
  color: var(--text-muted);
  margin: 0;
}

@media (min-width: 900px) {
  .viz-layout {
    grid-template-columns: minmax(0, 0.9fr) minmax(0, 1.1fr);
  }
}

/* ------------------------------
   9) Repo loader
   ------------------------------ */
#repo-list {
  min-height: 80px;
}

.loader {
  width: 44px;
  height: 44px;
  margin: 20px auto;
  border-radius: 50%;
  border: 3px solid rgba(148, 163, 184, 0.25);
  border-top-color: var(--primary);
  display: none;
  animation: spin 900ms linear infinite;
}

.loader.active {
  display: block;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ------------------------------
   10) Contact form
   ------------------------------ */
#contactForm {
  display: grid;
  gap: var(--space-3);
  max-width: 560px;
  margin: 0 auto;
}

/* Contact layout: lottie a la izquierda del formulario */
.contact-layout {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-6);
  align-items: center;
  margin-top: var(--space-4);
}

.contact-illustration {
  width: 100%;
  max-width: 420px;
  aspect-ratio: 1 / 1;
  margin: 0 auto;

  border-radius: var(--radius-xl);
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  display: grid;
  place-items: center;
}

.contact-illustration dotlottie-wc {
  width: 100%;
  height: 100%;
  display: block;
}

@media (min-width: 992px) {
  .contact-layout {
    grid-template-columns: 420px 1fr;
    align-items: start;
  }

  #contactForm {
    margin: 0;
    max-width: none;
  }

  .contact-illustration {
    margin: 0;
  }
}

@media (max-width: 520px) {
  .contact-illustration {
    max-width: 340px;
  }
}

#contactForm label {
  font-weight: 600;
  color: var(--text);
}

#contactForm input,
#contactForm textarea {
  width: 100%;
  padding: 12px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface-solid);
  color: var(--text);
  transition: box-shadow var(--t-med) var(--ease-out), border-color var(--t-med) var(--ease-out), transform var(--t-med) var(--ease-out);
}

#contactForm textarea {
  min-height: 140px;
  resize: vertical;
}

#contactForm input:focus,
#contactForm textarea:focus {
  outline: none;
  border-color: rgba(8, 145, 178, 0.45);
  box-shadow: var(--ring);
}

#contactForm button {
  margin-top: var(--space-2);
  height: 44px;
  border: 0;
  border-radius: 12px;
  background: var(--gradient-accent);
  color: #fff;
  font-weight: 700;
  letter-spacing: var(--tracking-wide);
  cursor: pointer;

  transition: transform var(--t-med) var(--ease-out), filter var(--t-med) var(--ease-out);
}

#contactForm button:hover {
  transform: translateY(-1px);
  filter: brightness(1.05);
}

#contactForm button:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

/* ------------------------------
   11) CV section
   ------------------------------ */
.cv-download-container {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-4);
  margin-top: var(--space-5);
}

@media (min-width: 720px) {
  .cv-download-container {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.cv-icon {
  display: inline-flex;
  width: 44px;
  height: 44px;
  border-radius: 14px;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  background: rgba(8, 145, 178, 0.12);
  border: 1px solid var(--border);
  color: var(--text);
  margin-bottom: var(--space-3);
}

.cv-download-btn {
  display: inline-flex;
  align-items: center;
  gap: 10px;

  margin-top: var(--space-3);
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);

  background: var(--surface-solid);
  color: var(--text);
  font-weight: 700;
  text-decoration: none;

  transition: transform var(--t-med) var(--ease-out), box-shadow var(--t-med) var(--ease-out), border-color var(--t-med) var(--ease-out);
}

.cv-download-btn:hover {
  text-decoration: none;
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
  border-color: var(--border-strong);
}

.download-icon {
  width: 18px;
  height: 18px;
}

/* Keep the existing layout, but make the decorative 3D block more "premium" and subtle */
.cv-with-animation {
  display: grid;
  gap: var(--space-6);
}

@media (min-width: 992px) {
  .cv-with-animation {
    grid-template-columns: 1fr 380px;
    align-items: center;
  }
}

.animation-3d-wrapper {
  width: 100%;
  max-width: 420px;
  aspect-ratio: 1 / 1;

  border-radius: var(--radius-xl);
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: var(--shadow-sm);

  position: relative;
  overflow: hidden;
  display: grid;
  place-items: center;
}


/* (Removed decorative conic/circle overlays that felt like a spotlight under the pointer) */

/* ------------------------------
   11.b) Lottie (a la derecha de los CV)
   ------------------------------ */

.animation-3d-wrapper dotlottie-wc {
  /* Fill wrapper without distortion */
  width: 100%;
  height: 100%;
  display: block;
}

@media (max-width: 992px) {
  .animation-3d-wrapper {
    max-width: 340px;
    margin: 0 auto;
  }
}

/* ------------------------------
   12) Footer
   ------------------------------ */
footer {
  width: min(100%, var(--container));
  margin: var(--space-10) auto var(--space-7);
  padding: 0 var(--gutter);

  display: grid;
  gap: var(--space-4);
  align-items: center;
}

.footer-left,
.footer-right {
  display: inline-flex;
  gap: 12px;
  align-items: center;
}

.footer-center {
  color: var(--text-faint);
  font-size: var(--fs-sm);
  margin: 0;
}

.social-link {
  display: inline-flex;
  width: 40px;
  height: 40px;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface-2);
  box-shadow: var(--shadow-sm);
  transition: transform var(--t-med) var(--ease-out), box-shadow var(--t-med) var(--ease-out);
}

.social-link:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.social-icon {
  width: 20px;
  height: 20px;
  fill: var(--text);
}

@media (min-width: 800px) {
  footer {
    grid-template-columns: 1fr auto 1fr;
  }
  .footer-center {
    text-align: center;
  }
  .footer-right {
    justify-content: flex-end;
  }
}
